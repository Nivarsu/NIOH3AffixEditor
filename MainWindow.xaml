<Window x:Class="Nioh3AffixEditor.MainWindow"

        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"

        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"

        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"

        mc:Ignorable="d"

        Title="Nioh3 装备修改器" Height="620" Width="1380" MinWidth="1380"

        WindowStartupLocation="CenterScreen">

    <Grid Margin="14">

        <Grid.ColumnDefinitions>

            <ColumnDefinition Width="220" />

            <ColumnDefinition Width="12" />

            <ColumnDefinition Width="*" />

            <ColumnDefinition Width="12" />

            <ColumnDefinition Width="260" />

        </Grid.ColumnDefinitions>



        <Border Grid.Column="0" MinWidth="220" Background="#0DFFFFFF" BorderBrush="#22000000" BorderThickness="1" CornerRadius="6" Padding="12">

            <StackPanel>

                <TextBlock Text="一键启动" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,10" />



                <Button Content="{Binding StartButtonText}"

                        Command="{Binding StartStopCommand}"

                        Height="48"

                        FontSize="16"

                        FontWeight="SemiBold"

                        Margin="0,0,0,10" />





                <TextBlock Text="{Binding SimpleStatusText}" Foreground="#666" TextWrapping="Wrap" Margin="0,0,0,8" />



                <TextBlock Text="装备基址" Foreground="#666" />

                <TextBlock Text="{Binding EquipmentBaseText}" FontFamily="Consolas" Foreground="#444" Margin="0,2,0,10" />



                <TextBlock Text="{Binding UpdateHintText}" Foreground="#666" TextWrapping="Wrap" Margin="0,0,0,16" />

                <TextBlock Text="{Binding UpdateAnnouncementText}" Foreground="#666" FontSize="11" TextWrapping="Wrap" Margin="0,0,0,16">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsUpdateAnnouncementVisible}" Value="True">
                                    <Setter Property="Visibility" Value="Visible" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>

                <Border Background="#08000000" BorderBrush="#18000000" BorderThickness="1" CornerRadius="4" Padding="8" Margin="0,0,0,12">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsTestLogVisible}" Value="True">
                                    <Setter Property="Visibility" Value="Visible" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <StackPanel>
                        <TextBlock Text="测试日志" FontSize="12" FontWeight="SemiBold" Margin="0,0,0,6" />
                        <ScrollViewer Height="96" VerticalScrollBarVisibility="Auto">
                            <TextBlock Text="{Binding TestLogText}" Foreground="#666" FontSize="11" TextWrapping="Wrap" />
                        </ScrollViewer>
                    </StackPanel>
                </Border>



                <Border Background="#08000000" BorderBrush="#18000000" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,0,0,0">

                    <StackPanel>

                        <TextBlock Text="额外功能" FontSize="14" FontWeight="SemiBold" Margin="0,0,0,8" />

                        <CheckBox Content="无视技能学习条件" IsChecked="{Binding IsSkillBypassEnabled}" />

                        <TextBlock Text="设置必须为「长按学习技能」，否则无效" Foreground="#888" FontSize="11" Margin="20,4,0,0" TextWrapping="Wrap" />

                    </StackPanel>

                </Border>

            </StackPanel>

        </Border>



        <Border Grid.Column="2" Background="#0DFFFFFF" BorderBrush="#22000000" BorderThickness="1" CornerRadius="6" Padding="12">

            <DockPanel LastChildFill="True">

                <StackPanel DockPanel.Dock="Top" Margin="0,0,0,10">

                    <TextBlock Text="词条修改（7 条）" FontSize="16" FontWeight="SemiBold" />

                    <TextBlock Text="{Binding AffixUsageTipsText}" Foreground="#666" FontSize="11" TextWrapping="Wrap" Margin="0,6,0,0" />



                </StackPanel>



                <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="0,10,0,0">

                    <Button Content="刷新数值" Command="{Binding RefreshAffixesCommand}" Padding="12,6" Margin="0,0,8,0" />

                    <Button Content="应用修改" Command="{Binding ApplyAffixesCommand}" Padding="12,6" />

                </StackPanel>



                <Grid>

                    <Grid.RowDefinitions>

                        <RowDefinition Height="Auto" />

                        <RowDefinition Height="*" />

                    </Grid.RowDefinitions>



                    <Grid Grid.Row="0" Margin="0,0,0,6" HorizontalAlignment="Stretch">

                        <Grid.ColumnDefinitions>

                            <ColumnDefinition Width="48" />

                            <ColumnDefinition Width="3.8*" MinWidth="280" />

                            <ColumnDefinition Width="1.1*" MinWidth="90" />

                            <ColumnDefinition Width="0.7*" MinWidth="60" />

                            <ColumnDefinition Width="0.7*" MinWidth="60" />

                            <ColumnDefinition Width="0.7*" MinWidth="60" />

                            <ColumnDefinition Width="0.7*" MinWidth="60" />

                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="#" Foreground="#666" />

                        <TextBlock Grid.Column="1" Text="词条ID" Foreground="#666" />

                        <TextBlock Grid.Column="2" Text="词条LV/数值" Foreground="#666" />

                        <TextBlock Grid.Column="3" Text="前缀1" Foreground="#666" />

                        <TextBlock Grid.Column="4" Text="前缀2" Foreground="#666" />

                        <TextBlock Grid.Column="5" Text="前缀3" Foreground="#666" />

                        <TextBlock Grid.Column="6" Text="前缀4" Foreground="#666" />

                    </Grid>



                    <ItemsControl Grid.Row="1" ItemsSource="{Binding Slots}" HorizontalAlignment="Stretch">

                        <ItemsControl.ItemTemplate>

                            <DataTemplate>

                                <Grid Margin="0,0,0,6" HorizontalAlignment="Stretch">

                                    <Grid.ColumnDefinitions>

                                        <ColumnDefinition Width="48" />

                                        <ColumnDefinition Width="3.8*" MinWidth="280" />

                                        <ColumnDefinition Width="1.1*" MinWidth="90" />

                                        <ColumnDefinition Width="0.7*" MinWidth="60" />

                                        <ColumnDefinition Width="0.7*" MinWidth="60" />

                                        <ColumnDefinition Width="0.7*" MinWidth="60" />

                                        <ColumnDefinition Width="0.7*" MinWidth="60" />

                                    </Grid.ColumnDefinitions>



                                    <TextBlock Grid.Column="0" Text="{Binding SlotIndex}" VerticalAlignment="Center" />



                                    <ComboBox Grid.Column="1"

                                              ItemsSource="{Binding FilteredAffixIdOptions}"

                                              IsDropDownOpen="{Binding IsAffixIdDropDownOpen}"

                                              IsEditable="True"
                                              SelectedItem="{Binding SelectedAffixIdOption, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"

                                              IsTextSearchEnabled="False"

                                              StaysOpenOnEdit="True"

                                              MaxDropDownHeight="360"

                                              Text="{Binding AffixIdText, UpdateSourceTrigger=PropertyChanged}" />



                                    <TextBox Grid.Column="2"

                                             Text="{Binding LevelText, UpdateSourceTrigger=PropertyChanged}"

                                             PreviewTextInput="NumericTextBox_PreviewTextInput"

                                             DataObject.Pasting="NumericTextBox_OnPaste"

                                             Margin="8,0,0,0" />



                                    <TextBox Grid.Column="3"

                                             Text="{Binding Prefix1Text, UpdateSourceTrigger=PropertyChanged}"

                                             PreviewTextInput="NumericTextBox_PreviewTextInput"

                                             DataObject.Pasting="NumericTextBox_OnPaste"

                                             Margin="8,0,0,0" />



                                    <TextBox Grid.Column="4"

                                             Text="{Binding Prefix2Text, UpdateSourceTrigger=PropertyChanged}"

                                             PreviewTextInput="NumericTextBox_PreviewTextInput"

                                             DataObject.Pasting="NumericTextBox_OnPaste"

                                             Margin="8,0,0,0" />



                                    <TextBox Grid.Column="5"

                                             Text="{Binding Prefix3Text, UpdateSourceTrigger=PropertyChanged}"

                                             PreviewTextInput="NumericTextBox_PreviewTextInput"

                                             DataObject.Pasting="NumericTextBox_OnPaste"

                                             Margin="8,0,0,0" />



                                    <TextBox Grid.Column="6"

                                             Text="{Binding Prefix4Text, UpdateSourceTrigger=PropertyChanged}"

                                             PreviewTextInput="NumericTextBox_PreviewTextInput"

                                             DataObject.Pasting="NumericTextBox_OnPaste"

                                             Margin="8,0,0,0" />

                                </Grid>

                            </DataTemplate>

                        </ItemsControl.ItemTemplate>

                    </ItemsControl>

                </Grid>

            </DockPanel>

        </Border>



        <Border Grid.Column="4" MinWidth="260" Background="#0DFFFFFF" BorderBrush="#22000000" BorderThickness="1" CornerRadius="6" Padding="12">

            <DockPanel LastChildFill="True">

                <StackPanel DockPanel.Dock="Top" Margin="0,0,0,10">

                    <TextBlock Text="装备属性" FontSize="16" FontWeight="SemiBold" />

                    <TextBlock Text="修改装备的基础属性。" Foreground="#666" Margin="0,4,0,0" />

                </StackPanel>



                <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="0,10,0,0">

                    <Button Content="刷新属性" Command="{Binding RefreshEquipmentCommand}" Padding="12,6" Margin="0,0,8,0" />

                    <Button Content="应用属性" Command="{Binding ApplyEquipmentCommand}" Padding="12,6" />

                </StackPanel>



                <ScrollViewer VerticalScrollBarVisibility="Auto">

                    <StackPanel DataContext="{Binding Equipment}">

                        <TextBlock Text="物品ID" Foreground="#666" Margin="0,0,0,2" />

                        <TextBox Text="{Binding ItemIdText, UpdateSourceTrigger=PropertyChanged}"

                                 PreviewTextInput="NumericTextBox_PreviewTextInput"

                                 DataObject.Pasting="NumericTextBox_OnPaste"

                                 Margin="0,0,0,10" />



                        <TextBlock Text="幻化ID" Foreground="#666" Margin="0,0,0,2" />

                        <TextBox Text="{Binding TransmogIdText, UpdateSourceTrigger=PropertyChanged}"

                                 PreviewTextInput="NumericTextBox_PreviewTextInput"

                                 DataObject.Pasting="NumericTextBox_OnPaste"

                                 Margin="0,0,0,10" />



                        <TextBlock Text="等级" Foreground="#666" Margin="0,0,0,2" />

                        <TextBox Text="{Binding LevelText, UpdateSourceTrigger=PropertyChanged}"

                                 PreviewTextInput="NumericTextBox_PreviewTextInput"

                                 DataObject.Pasting="NumericTextBox_OnPaste"

                                 Margin="0,0,0,10" />



                        <TextBlock Text="装备+值" Foreground="#666" Margin="0,0,0,2" />

                        <TextBox Text="{Binding EquipPlusValueText, UpdateSourceTrigger=PropertyChanged}"

                                 PreviewTextInput="NumericTextBox_PreviewTextInput"

                                 DataObject.Pasting="NumericTextBox_OnPaste"

                                 Margin="0,0,0,10" />



                        <TextBlock Text="品质" Foreground="#666" Margin="0,0,0,2" />

                        <TextBox Text="{Binding QualityText, UpdateSourceTrigger=PropertyChanged}"

                                 PreviewTextInput="NumericTextBox_PreviewTextInput"

                                 DataObject.Pasting="NumericTextBox_OnPaste"

                                 Margin="0,0,0,10" />



                        <TextBlock Text="地狱技能ID" Foreground="#666" Margin="0,0,0,2" />

                        <ComboBox ItemsSource="{Binding FilteredUnderworldSkillOptions}"

                                  IsDropDownOpen="{Binding IsUnderworldSkillDropDownOpen}"

                                  IsEditable="True"
                                  SelectedItem="{Binding SelectedUnderworldSkillOption, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"

                                  IsTextSearchEnabled="False"

                                  StaysOpenOnEdit="True"

                                  MaxDropDownHeight="360"

                                  Text="{Binding UnderworldSkillIdText, UpdateSourceTrigger=PropertyChanged}"

                                  Margin="0,0,0,10" />



                        <TextBlock Text="爱用度" Foreground="#666" Margin="0,0,0,2" />

                        <TextBox Text="{Binding FamiliarityText, UpdateSourceTrigger=PropertyChanged}"

                                 PreviewTextInput="NumericTextBox_PreviewTextInput"

                                 DataObject.Pasting="NumericTextBox_OnPaste"

                                 Margin="0,0,0,10" />



                        <CheckBox Content="地狱武器" IsChecked="{Binding IsUnderworld}" Margin="0,0,0,10" />

                    </StackPanel>

                </ScrollViewer>

            </DockPanel>

        </Border>

    </Grid>

</Window>






